- name: Check if ssh key exists
  stat:
    path: "{{ssh_directory}}/id_rsa"
  register: git_ssh_key_exists

- name: Generate ssh key
  shell: |
    ssh-keygen -t rsa -C "{{git_ssh_key_user}}" -f "{{ssh_directory}}/id_rsa" -N ''
  become: False
  when: git_ssh_key_exists.stat.exists == False

- name: Add deadsnakes ppa for python utilities
  apt_repository:
    validate_certs: no
    repo: ppa:deadsnakes/ppa
    state: present

- name: Install pip python package manager
  apt:
    name: python-pip
    state: present

- name: Install pip for python 3
  apt:
    name: python3-pip
    state: present

- name: Install Python development libs
  apt:
    name: python-dev
    state: present

- name: Install Python (3.6) development libs
  apt:
    name: python3.6-dev
    state: present

- name: Install pylint cli and tools
  pip:
    name: pylint
    state: present

- name: Install httpie cli
  pip:
    name: httpie
    state: present

- name: Install AWS cli
  pip:
    name: awscli
    version: 1.11.130
    state: present

- name: Check Docker Installed
  shell: which docker
  register: docker_check
  ignore_errors: True

# will install the latest version of docker
- name: Install Docker
  shell: curl https://get.docker.com/ | sh
  when: docker_check.rc == 1

# https://github.com/ansible/ansible/issues/20492#issuecomment-274081101
- name: Install docker compose
  pip:
    name: docker-compose
    version: 1.9.0
    state: present

- name: Install npm
  apt:
    name: npm
    state: present

- name: Install n node.js version manager
  npm:
    name: n
    global: yes
    state: present

- name: Install node.js 8 stable
  shell: n latest

- name: Install coffee-script
  npm:
    name: coffee-script
    global: yes
    state: present

- name: Install webpack
  npm:
    name: webpack
    global: yes
    state: present

- name: Install ruby
  apt:
    name: ruby
    state: present

- name: Install ruby development tools
  apt:
    name: ruby-dev
    state: present

- name: Install rails
  apt:
    name: rails
    state: present

- name: Install travis-cli
  gem:
    name: travis-cli
    state: present

- name: Install datagrip
  shell: snap install datagrip --classic
  
- name: Install pep8
  pip:
    name: pep8
    state: present
    
- name: Install flake8
  pip:
    name: flake8
    state: present
  
- name: Install Atom
  shell: snap install atom --classic
  
- name: Install Atom Extensions
  shell: |
    apm install atom-clock@0.1.16
    apm install atom-material-syntax@1.0.8
    apm install atom-material-syntax-dark@1.0.0
    apm install atom-material-ui@2.1.3
    apm install aurora-theme@1.2.2
    apm install autocomplete-python@1.10.5
    apm install blame@1.0.1
    apm install language-javascript-jsx@0.3.7
    apm install material@2.2.0
    apm install material-palenight-syntax@1.5.7
    apm install platformio-ide-terminal@2.8.1
    apm install pristine-ui@1.1.11
    apm install python-indent@1.1.5
    apm install python-tools@0.6.9
    apm install riot-tag@1.1.1
    apm install todo-show@2.3.0
    apm install duotone-dark-sky-syntax
    apm install file-icons@2.1.10
    apm install editorconfig
    apm install highlight-selected
    apm install atom-ide-ui
    apm install ide-python
  become: False
  ignore_errors: True

- name: Install Code
  apt:
    name: code
    state: present

# will install vscode extensions
- name: Install Code Extensions
  shell: |
    code --install-extension ms-python.python
    code --install-extension EditorConfig.EditorConfig
    code --install-extension abusaidm.html-snippets
    code --install-extension arcticicestudio.nord-visual-studio-code
    code --install-extension christian-kohler.npm-intellisense
    code --install-extension christian-kohler.path-intellisense
    code --install-extension crisward.riot-tag
    code --install-extension dbaeumer.vscode-eslint
    code --install-extension dzannotti.vscode-babel-coloring
    code --install-extension eg2.vscode-npm-script
    code --install-extension PKief.material-icon-theme
    code --install-extension formulahendry.terminal
    code --install-extension gerane.Theme-azure
    code --install-extension hnw.vscode-auto-open-markdown-preview
    code --install-extension jasonnutter.search-node-modules
    code --install-extension liuji-jim.vue
    code --install-extension marcostazi.VS-code-vagrantfile
    code --install-extension octref.vetur
    code --install-extension waderyan.nodejs-extension-pack
    code --install-extension xabikos.JavaScriptSnippets
    code --install-extension zhuangtongfa.Material-theme
    code --install-extension dracula-theme.theme-dracula
    code --install-extension Equinusocio.vsc-material-theme
    code --install-extension alireza94.theme-gotham
    code --install-extension raashida.fixthecode-vs
    code --install-extension gerane.theme-artschool
    code --install-extension lextudio.restructuredtext
    code --install-extension loiane.ts-extension-pack
    code --install-extension wesbos.theme-cobalt2
    code --install-extension josef.rouge-theme
    code --install-extension eamodio.gitlens
    code --install-extension formulahendry.auto-close-tag
    code --install-extension wayou.vscode-todo-highlight
    code --install-extension yahya-gilany.vscode-pomodoro
    code --install-extensions primalmotion.primal
    code --install-extension ulthes.theme-firewatch
  become: False
  ignore_errors: True

- name: Add vim8 ppa
  apt_repository:
    validate_certs: no
    repo: ppa:jonathonf/vim
    state: present

- name: Install vim
  apt:
    name: vim
    state: present
    
- name: Install apt-vim
  shell: curl -sL https://raw.githubusercontent.com/egalpin/apt-vim/master/install.sh | sh
  become: False
  
- name: Install vim plugins
  shell: |
    apt-vim install -y https://github.com/scrooloose/nerdtree.git
    apt-vim install -y https://github.com/vim-python/python-syntax.git
    apt-vim install -y https://github.com/nvie/vim-flake8.git
    apt-vim install -y https://github.com/Valloric/YouCompleteMe.git
    apt-vim install -y https://github.com/editorconfig/editorconfig-vim.git
    apt-vim install -y https://github.com/ryym/vim-riot.git
    apt-vim install -y https://github.com/leafgarland/typescript-vim.git
    apt-vim install -y https://github.com/kchmck/vim-coffee-script.git
    apt-vim install -y https://github.com/mxw/vim-jsx.git
    apt-vim install -y https://github.com/pangloss/vim-javascript.git
    apt-vim install -y https://github.com/posva/vim-vue.git
  become: False
